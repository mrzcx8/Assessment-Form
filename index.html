<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVOS Service Provider Performance Assessment Form</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --light-gray: #f4f6f8;
            --dark-gray: #34495e;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
            padding: 10px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        h1 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        h2 {
            color: var(--secondary-color);
            font-size: 20px;
            margin: 20px 0 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .instructions {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-style: italic;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .form-section {
            margin-bottom: 30px;
            display: none;
        }
        
        .form-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input[type="text"],
        input[type="date"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .radio-group {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
            width: 18%;
        }
        
        .radio-option input {
            margin-bottom: 5px;
            height: 20px;
            width: 20px;
            cursor: pointer;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .rating-info {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .rating-info p {
            margin-bottom: 5px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn-next {
            margin-left: auto;
        }
        
        .btn-prev {
            background-color: #95a5a6;
        }
        
        .btn-prev:hover {
            background-color: #7f8c8d;
        }
        
        .btn-submit {
            background-color: var(--success-color);
        }
        
        .btn-submit:hover {
            background-color: #27ae60;
        }
        
        .signature-container {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
        }
        
        canvas.signature-pad {
            border: 1px dashed #aaa;
            width: 100%;
            height: 150px;
            cursor: crosshair;
            background-color: #fff;
        }
        
        .signature-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
            gap: 10px;
        }
        
        .signature-clear {
            background-color: var(--danger-color);
        }
        
        .signature-clear:hover {
            background-color: #c0392b;
        }
        
        .progress-bar {
            margin-bottom: 20px;
            background-color: #eee;
            border-radius: 4px;
            height: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .summary-box {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .summary-box p {
            margin-bottom: 8px;
        }
        
        .summary-box .score {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .passing {
            color: var(--success-color);
        }
        
        .failing {
            color: var(--danger-color);
        }

        .auto-save {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            font-size: 14px;
            color: #2d3748;
        }
        
        .auto-save .dot {
            height: 10px;
            width: 10px;
            background-color: #cbd5e0;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .auto-save .dot.saving {
            background-color: #f6ad55;
            animation: pulse 1s infinite;
        }
        
        .auto-save .dot.saved {
            background-color: #68d391;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .message {
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            display: none;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
        }

        .error {
            background-color: #f8d7da;
            color: #721c24;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            
            .container {
                padding: 15px;
                margin-top: 0;
                margin-bottom: 0;
                border-radius: 0;
                min-height: 100vh;
            }
            
            h1 {
                font-size: 20px;
            }
            
            h2 {
                font-size: 18px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
                width: 100%;
                margin: 5px 0;
            }
            
            .btn-container {
                flex-direction: column;
            }
            
            .radio-group {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-between;
            }
            
            .radio-option {
                width: 20%;
                padding: 5px 0;
                margin-bottom: 5px;
            }
            
            .radio-option label {
                font-size: 14px;
            }
            
            input[type="text"],
            input[type="date"],
            input[type="email"],
            textarea,
            select {
                padding: 10px;
                font-size: 14px;
            }
            
            .instructions, .rating-info {
                font-size: 12px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>EVOS Service Provider (Study Coordinator) Performance Assessment Form</h1>
            <div class="instructions">
                <p>Instruction to Assessor: Performance evaluation shall be conducted on a monthly basis, and scoring must be finalised by the end of 3rd week of each month.</p>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progressBar" style="width: 0%"></div>
            </div>
        </header>
        
        <!-- FormSubmit Form -->
        <form id="assessmentForm" action="https://formsubmit.co/mrnizam988@gmail.com" method="POST">
            <!-- Dengan ini -->
         <form action="https://formsubmit.co/cd3df1883d1a0d7efc330589c9ff25bc" method="POST">
    
            <!-- FormSubmit Configuration -->
            <input type="hidden" name="_next" value="https://mrzcx8.github.io/Assessment-Form/thank-you.html">
            <input type="hidden" name="_subject" value="EVOS Performance Assessment Submission">
            <input type="hidden" name="_captcha" value="false">
            
            <!-- Field to hold all the data in a single submission -->
            <input type="hidden" id="allFormData" name="allFormData">
            
            <!-- Hidden fields to collect signatures -->
            <input type="hidden" id="assessorSignatureData" name="assessorSignature">
            <input type="hidden" id="coordinatorSignatureData" name="coordinatorSignature">
            
            <!-- Hidden field for total score -->
            <input type="hidden" id="totalScoreField" name="totalScore">
            
            <!-- Section 0: Basic Information -->
            <div class="form-section active" id="section0">
                <h2>Basic Information</h2>
                
                <div class="form-group">
                    <label for="coordinatorName">1. Coordinator's Name</label>
                    <input type="text" id="coordinatorName" name="coordinatorName" required>
                </div>
                
                <div class="form-group">
                    <label for="assessmentDate">2. Assessment Date</label>
                    <input type="date" id="assessmentDate" name="assessmentDate" required>
                </div>
                
                <div class="form-group">
                    <label for="assessorName">3. Assessor's Name</label>
                    <input type="text" id="assessorName" name="assessorName" required>
                </div>
                
                <div class="form-group">
                    <label for="trialSite">4. Trial Site</label>
                    <select id="trialSite" name="trialSite" required>
                        <option value="">-- Select Trial Site --</option>
                        <option value="Hospital Pulau Pinang">Hospital Pulau Pinang</option>
                        <option value="Hospital Tuanku Jaafar">Hospital Tuanku Jaafar</option>
                        <option value="Hospital Sultanah Bahiyah">Hospital Sultanah Bahiyah</option>
                        <option value="Hospital Sultan Abdul Halim">Hospital Sultan Abdul Halim</option>
                        <option value="Hospital Selayang">Hospital Selayang</option>
                        <option value="Hospital Ampang">Hospital Ampang</option>
                    </select>
                </div>
                
                <div class="rating-info">
                    <h3>Rating Score:</h3>
                    <p><strong>1</strong> - All deliverables not meeting the timeline as per target / More than 1 negative feedback</p>
                    <p><strong>2</strong> - Some deliverables not meeting the timeline as per target / overall neutral feedback with more than 1 negative feedback</p>
                    <p><strong>3</strong> - All deliverables meeting the timeline as per target / overall good feedback with not more than 1 negative feedback</p>
                    <p><strong>4</strong> - All deliverables meeting the timeline as per target and some even exceeded the expectations. Issue handling and resolutions beyond the level of competency / Positive feedback with occasional compliment.</p>
                    <p><strong>5</strong> - Most deliverables achieved far beyond the expectation and more effort from the individual to improve the overall project level milestones. Able to handle issues independently with good resolution outcome. / Positive feedback with frequent compliments</p>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-next" onclick="nextSection(0)">Next</button>
                </div>
            </div>
            
            <!-- Section 1: Trial Management and Coordination -->
            <div class="form-section" id="section1">
                <h2>Section 1: Trial Management and Coordination</h2>
                
                <div class="form-group">
                    <label>Protocol Adherence: Ensures all aspects of the study are conducted as per the approved protocol.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="protocol1" name="protocolAdherence" value="1" required onclick="updateTotal();">
                            <label for="protocol1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="protocol2" name="protocolAdherence" value="2" onclick="updateTotal();">
                            <label for="protocol2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="protocol3" name="protocolAdherence" value="3" onclick="updateTotal();">
                            <label for="protocol3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="protocol4" name="protocolAdherence" value="4" onclick="updateTotal();">
                            <label for="protocol4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="protocol5" name="protocolAdherence" value="5" onclick="updateTotal();">
                            <label for="protocol5">5</label>
                        </div>
                    </div>
                    <textarea id="protocolComment" name="protocolComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Timely Communication with Stakeholders: Effectively communicates with the principal investigator, CROs, and the study team to ensure smooth coordination.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="comm1" name="timelyCommunication" value="1" required onclick="updateTotal();">
                            <label for="comm1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="comm2" name="timelyCommunication" value="2" onclick="updateTotal();">
                            <label for="comm2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="comm3" name="timelyCommunication" value="3" onclick="updateTotal();">
                            <label for="comm3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="comm4" name="timelyCommunication" value="4" onclick="updateTotal();">
                            <label for="comm4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="comm5" name="timelyCommunication" value="5" onclick="updateTotal();">
                            <label for="comm5">5</label>
                        </div>
                    </div>
                    <textarea id="commComment" name="commComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Meeting Project Milestones: Ensures that key study milestones (e.g., recruitment targets, data submission) are met on time.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="milestone1" name="projectMilestones" value="1" required onclick="updateTotal();">
                            <label for="milestone1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="milestone2" name="projectMilestones" value="2" onclick="updateTotal();">
                            <label for="milestone2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="milestone3" name="projectMilestones" value="3" onclick="updateTotal();">
                            <label for="milestone3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="milestone4" name="projectMilestones" value="4" onclick="updateTotal();">
                            <label for="milestone4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="milestone5" name="projectMilestones" value="5" onclick="updateTotal();">
                            <label for="milestone5">5</label>
                        </div>
                    </div>
                    <textarea id="milestoneComment" name="milestoneComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(1)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(1)">Next</button>
                </div>
            </div>
            
            <!-- Section 2: Subject Recruitment -->
            <div class="form-section" id="section2">
                <h2>Section 2: Subject Recruitment</h2>
                
                <div class="form-group">
                    <label>Pre-Screening and Recruitment Efficiency: Effectively pre-screen subjects as per eligibility criteria.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="screening1" name="preScreening" value="1" required onclick="updateTotal();">
                            <label for="screening1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="screening2" name="preScreening" value="2" onclick="updateTotal();">
                            <label for="screening2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="screening3" name="preScreening" value="3" onclick="updateTotal();">
                            <label for="screening3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="screening4" name="preScreening" value="4" onclick="updateTotal();">
                            <label for="screening4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="screening5" name="preScreening" value="5" onclick="updateTotal();">
                            <label for="screening5">5</label>
                        </div>
                    </div>
                    <textarea id="screeningComment" name="screeningComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Informed Consent Process: Effectively assist investigators to obtain informed consent from participants.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="consent1" name="informedConsent" value="1" required onclick="updateTotal();">
                            <label for="consent1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="consent2" name="informedConsent" value="2" onclick="updateTotal();">
                            <label for="consent2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="consent3" name="informedConsent" value="3" onclick="updateTotal();">
                            <label for="consent3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="consent4" name="informedConsent" value="4" onclick="updateTotal();">
                            <label for="consent4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="consent5" name="informedConsent" value="5" onclick="updateTotal();">
                            <label for="consent5">5</label>
                        </div>
                    </div>
                    <textarea id="consentComment" name="consentComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(2)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(2)">Next</button>
                </div>
            </div>
            
            <!-- Section 3: Data Collection and Documentation -->
            <div class="form-section" id="section3">
                <h2>Section 3: Data Collection and Documentation</h2>
                
                <div class="form-group">
                    <label>Accuracy of Data Entry: Ensures accurate and complete data entry in Case Report Forms (CRFs) and REDCap databases.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="dataEntry1" name="dataAccuracy" value="1" required onclick="updateTotal();">
                            <label for="dataEntry1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataEntry2" name="dataAccuracy" value="2" onclick="updateTotal();">
                            <label for="dataEntry2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataEntry3" name="dataAccuracy" value="3" onclick="updateTotal();">
                            <label for="dataEntry3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataEntry4" name="dataAccuracy" value="4" onclick="updateTotal();">
                            <label for="dataEntry4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataEntry5" name="dataAccuracy" value="5" onclick="updateTotal();">
                            <label for="dataEntry5">5</label>
                        </div>
                    </div>
                    <textarea id="dataEntryComment" name="dataEntryComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Timeliness of Data Submission and Queries Resolution: Submits data and resolves data queries in a timely manner without delays.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="dataTimely1" name="dataTimeliness" value="1" required onclick="updateTotal();">
                            <label for="dataTimely1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataTimely2" name="dataTimeliness" value="2" onclick="updateTotal();">
                            <label for="dataTimely2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataTimely3" name="dataTimeliness" value="3" onclick="updateTotal();">
                            <label for="dataTimely3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataTimely4" name="dataTimeliness" value="4" onclick="updateTotal();">
                            <label for="dataTimely4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dataTimely5" name="dataTimeliness" value="5" onclick="updateTotal();">
                            <label for="dataTimely5">5</label>
                        </div>
                    </div>
                    <textarea id="dataTimelyComment" name="dataTimelyComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Reporting Adverse Events and Protocol Deviations: Identifies and reports adverse events or protocol deviations promptly and appropriately.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="adverse1" name="adverseEvents" value="1" required onclick="updateTotal();">
                            <label for="adverse1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="adverse2" name="adverseEvents" value="2" onclick="updateTotal();">
                            <label for="adverse2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="adverse3" name="adverseEvents" value="3" onclick="updateTotal();">
                            <label for="adverse3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="adverse4" name="adverseEvents" value="4" onclick="updateTotal();">
                            <label for="adverse4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="adverse5" name="adverseEvents" value="5" onclick="updateTotal();">
                            <label for="adverse5">5</label>
                        </div>
                    </div>
                    <textarea id="adverseComment" name="adverseComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(3)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(3)">Next</button>
                </div>
            </div>
            
            <!-- Section 4: Regulatory Compliance and Ethics -->
            <div class="form-section" id="section4">
                <h2>Section 4: Regulatory Compliance and Ethics</h2>
                
                <div class="form-group">
                    <label>Regulatory Document and Site File Maintenance: Keeps all regulatory documents and Site File updated and audit-ready.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="regulatory1" name="regulatoryDocs" value="1" required onclick="updateTotal();">
                            <label for="regulatory1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="regulatory2" name="regulatoryDocs" value="2" onclick="updateTotal();">
                            <label for="regulatory2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="regulatory3" name="regulatoryDocs" value="3" onclick="updateTotal();">
                            <label for="regulatory3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="regulatory4" name="regulatoryDocs" value="4" onclick="updateTotal();">
                            <label for="regulatory4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="regulatory5" name="regulatoryDocs" value="5" onclick="updateTotal();">
                            <label for="regulatory5">5</label>
                        </div>
                    </div>
                    <textarea id="regulatoryComment" name="regulatoryComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Compliance with GCP and Ethics Requirements: Adheres to Good Clinical Practice (GCP) guidelines and ethical standards.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="gcp1" name="gcpCompliance" value="1" required onclick="updateTotal();">
                            <label for="gcp1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gcp2" name="gcpCompliance" value="2" onclick="updateTotal();">
                            <label for="gcp2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gcp3" name="gcpCompliance" value="3" onclick="updateTotal();">
                            <label for="gcp3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gcp4" name="gcpCompliance" value="4" onclick="updateTotal();">
                            <label for="gcp4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gcp5" name="gcpCompliance" value="5" onclick="updateTotal();">
                            <label for="gcp5">5</label>
                        </div>
                    </div>
                    <textarea id="gcpComment" name="gcpComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(4)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(4)">Next</button>
                </div>
            </div>
            
            <!-- Section 5: Study Visit Coordination -->
            <div class="form-section" id="section5">
                <h2>Section 5: Study Visit Coordination</h2>
                
                <div class="form-group">
                    <label>Scheduling and Planning of Visits: Effectively schedules participant visits and ensures they follow the study timeline.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="scheduling1" name="visitScheduling" value="1" required onclick="updateTotal();">
                            <label for="scheduling1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="scheduling2" name="visitScheduling" value="2" onclick="updateTotal();">
                            <label for="scheduling2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="scheduling3" name="visitScheduling" value="3" onclick="updateTotal();">
                            <label for="scheduling3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="scheduling4" name="visitScheduling" value="4" onclick="updateTotal();">
                            <label for="scheduling4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="scheduling5" name="visitScheduling" value="5" onclick="updateTotal();">
                            <label for="scheduling5">5</label>
                        </div>
                    </div>
                    <textarea id="schedulingComment" name="schedulingComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Conducting Study Visits: Efficiently assists investigators in study visits procedures (e.g., phone call interview) during study visits.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="conducting1" name="visitConducting" value="1" required onclick="updateTotal();">
                            <label for="conducting1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="conducting2" name="visitConducting" value="2" onclick="updateTotal();">
                            <label for="conducting2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="conducting3" name="visitConducting" value="3" onclick="updateTotal();">
                            <label for="conducting3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="conducting4" name="visitConducting" value="4" onclick="updateTotal();">
                            <label for="conducting4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="conducting5" name="visitConducting" value="5" onclick="updateTotal();">
                            <label for="conducting5">5</label>
                        </div>
                    </div>
                    <textarea id="conductingComment" name="conductingComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(5)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(5)">Next</button>
                </div>
            </div>
            
            <!-- Section 6: Team Collaboration and Communication -->
            <div class="form-section" id="section6">
                <h2>Section 6: Team Collaboration and Communication</h2>
                
                <div class="form-group">
                    <label>Teamwork and Communication: Works well with the study team and communicates effectively with colleagues.</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="teamwork1" name="teamwork" value="1" required onclick="updateTotal();">
                            <label for="teamwork1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teamwork2" name="teamwork" value="2" onclick="updateTotal();">
                            <label for="teamwork2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teamwork3" name="teamwork" value="3" onclick="updateTotal();">
                            <label for="teamwork3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teamwork4" name="teamwork" value="4" onclick="updateTotal();">
                            <label for="teamwork4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teamwork5" name="teamwork" value="5" onclick="updateTotal();">
                            <label for="teamwork5">5</label>
                        </div>
                    </div>
                    <textarea id="teamworkComment" name="teamworkComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Support of Study Staff: Provides adequate support to other study personnel when required (e.g. support CRA site monitoring visits).</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="support1" name="staffSupport" value="1" required onclick="updateTotal();">
                            <label for="support1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="support2" name="staffSupport" value="2" onclick="updateTotal();">
                            <label for="support2">2</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="support3" name="staffSupport" value="3" onclick="updateTotal();">
                            <label for="support3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="support4" name="staffSupport" value="4" onclick="updateTotal();">
                            <label for="support4">4</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="support5" name="staffSupport" value="5" onclick="updateTotal();">
                            <label for="support5">5</label>
                        </div>
                    </div>
                    <textarea id="supportComment" name="supportComment" placeholder="Comments"></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(6)">Previous</button>
                    <button type="button" class="btn btn-next" onclick="nextSection(6)">Next</button>
                </div>
            </div>
            
            <!-- Section 7: Overall Performance -->
            <div class="form-section" id="section7">
                <h2>Overall Performance</h2>
                
                <div class="summary-box">
                    <h3>Performance Summary</h3>
                    <p>Total Score: <span id="totalScore" class="score">0</span> out of 70</p>
                    <p>Percentage: <span id="scorePercentage">0%</span></p>
                    <p id="passStatus">The passing score is 42 marks out of 70 (60.0%).</p>
                </div>
                
                <div class="form-group">
                    <label for="strengths">Strengths:</label>
                    <textarea id="strengths" name="strengths" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="improvements">Areas for Improvement:</label>
                    <textarea id="improvements" name="improvements" required></textarea>
                </div>

                <!-- Signature Section (Added right after Areas for Improvement) -->
                <div class="form-group">
                    <label>Assessor's Signature:</label>
                    <div class="signature-container">
                        <canvas id="assessorSignatureCanvas" class="signature-pad" width="600" height="150"></canvas>
                        <div class="signature-actions">
                            <button type="button" class="btn signature-clear" onclick="clearAssessorSignature()">Clear</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Coordinator's Signature:</label>
                    <div class="signature-container">
                        <canvas id="coordinatorSignatureCanvas" class="signature-pad" width="600" height="150"></canvas>
                        <div class="signature-actions">
                            <button type="button" class="btn signature-clear" onclick="clearCoordinatorSignature()">Clear</button>
                        </div>
                    </div>
                </div>
                
                <div class="btn-container">
                    <button type="button" class="btn btn-prev" onclick="prevSection(7)">Previous</button>
                    <button type="button" class="btn btn-submit" onclick="prepareAndSubmitForm()">Complete Assessment</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Total number of sections
        const totalSections = 8;
        
        // Current active section
        let currentSection = 0;
        
        // Signature canvases
        let assessorCanvas, assessorContext;
        let coordinatorCanvas, coordinatorContext;
        let isAssessorDrawing = false;
        let isCoordinatorDrawing = false;
        let lastAssessorX, lastAssessorY;
        let lastCoordinatorX, lastCoordinatorY;
        
        // Initialize when page loads
        window.onload = function() {
            updateProgressBar();
            initSignatureCanvases();
            loadFormData();
        };
        
        // Initialize signature canvases
        function initSignatureCanvases() {
            // Assessor signature canvas
            assessorCanvas = document.getElementById('assessorSignatureCanvas');
            if (assessorCanvas) {
                assessorContext = assessorCanvas.getContext('2d');
                assessorContext.strokeStyle = '#000';
                assessorContext.lineWidth = 2;
                
                // Mouse events for assessor canvas
                assessorCanvas.addEventListener('mousedown', startAssessorDrawing);
                assessorCanvas.addEventListener('mousemove', drawAssessorSignature);
                assessorCanvas.addEventListener('mouseup', stopAssessorDrawing);
                assessorCanvas.addEventListener('mouseout', stopAssessorDrawing);
                
                // Touch events for assessor canvas
                assessorCanvas.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const rect = assessorCanvas.getBoundingClientRect();
                    const touchX = touch.clientX - rect.left;
                    const touchY = touch.clientY - rect.top;
                    
                    isAssessorDrawing = true;
                    lastAssessorX = touchX;
                    lastAssessorY = touchY;
                });
                
                assessorCanvas.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                    if (!isAssessorDrawing) return;
                    
                    const touch = e.touches[0];
                    const rect = assessorCanvas.getBoundingClientRect();
                    const touchX = touch.clientX - rect.left;
                    const touchY = touch.clientY - rect.top;
                    
                    assessorContext.beginPath();
                    assessorContext.moveTo(lastAssessorX, lastAssessorY);
                    assessorContext.lineTo(touchX, touchY);
                    assessorContext.stroke();
                    
                    lastAssessorX = touchX;
                    lastAssessorY = touchY;
                    
                    // Save signature data
                    document.getElementById('assessorSignatureData').value = assessorCanvas.toDataURL();
                });
                
                assessorCanvas.addEventListener('touchend', stopAssessorDrawing);
            }
            
            // Coordinator signature canvas
            coordinatorCanvas = document.getElementById('coordinatorSignatureCanvas');
            if (coordinatorCanvas) {
                coordinatorContext = coordinatorCanvas.getContext('2d');
                coordinatorContext.strokeStyle = '#000';
                coordinatorContext.lineWidth = 2;
                
                // Mouse events for coordinator canvas
                coordinatorCanvas.addEventListener('mousedown', startCoordinatorDrawing);
                coordinatorCanvas.addEventListener('mousemove', drawCoordinatorSignature);
                coordinatorCanvas.addEventListener('mouseup', stopCoordinatorDrawing);
                coordinatorCanvas.addEventListener('mouseout', stopCoordinatorDrawing);
                
                // Touch events for coordinator canvas
                coordinatorCanvas.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const rect = coordinatorCanvas.getBoundingClientRect();
                    const touchX = touch.clientX - rect.left;
                    const touchY = touch.clientY - rect.top;
                    
                    isCoordinatorDrawing = true;
                    lastCoordinatorX = touchX;
                    lastCoordinatorY = touchY;
                });
                
                coordinatorCanvas.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                    if (!isCoordinatorDrawing) return;
                    
                    const touch = e.touches[0];
                    const rect = coordinatorCanvas.getBoundingClientRect();
                    const touchX = touch.clientX - rect.left;
                    const touchY = touch.clientY - rect.top;
                    
                    coordinatorContext.beginPath();
                    coordinatorContext.moveTo(lastCoordinatorX, lastCoordinatorY);
                    coordinatorContext.lineTo(touchX, touchY);
                    coordinatorContext.stroke();
                    
                    lastCoordinatorX = touchX;
                    lastCoordinatorY = touchY;
                    
                    // Save signature data
                    document.getElementById('coordinatorSignatureData').value = coordinatorCanvas.toDataURL();
                });
                
                coordinatorCanvas.addEventListener('touchend', stopCoordinatorDrawing);
            }
        }
        
        // Signature functions for Assessor
        function startAssessorDrawing(e) {
            isAssessorDrawing = true;
            const rect = assessorCanvas.getBoundingClientRect();
            lastAssessorX = e.clientX - rect.left;
            lastAssessorY = e.clientY - rect.top;
        }
        
        function drawAssessorSignature(e) {
            if (!isAssessorDrawing) return;
            
            const rect = assessorCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            assessorContext.beginPath();
            assessorContext.moveTo(lastAssessorX, lastAssessorY);
            assessorContext.lineTo(x, y);
            assessorContext.stroke();
            
            lastAssessorX = x;
            lastAssessorY = y;
            
            // Save signature data
            document.getElementById('assessorSignatureData').value = assessorCanvas.toDataURL();
        }
        
        function stopAssessorDrawing() {
            isAssessorDrawing = false;
        }
        
        function clearAssessorSignature() {
            assessorContext.clearRect(0, 0, assessorCanvas.width, assessorCanvas.height);
            document.getElementById('assessorSignatureData').value = '';
        }
        
        // Signature functions for Coordinator
        function startCoordinatorDrawing(e) {
            isCoordinatorDrawing = true;
            const rect = coordinatorCanvas.getBoundingClientRect();
            lastCoordinatorX = e.clientX - rect.left;
            lastCoordinatorY = e.clientY - rect.top;
        }
        
        function drawCoordinatorSignature(e) {
            if (!isCoordinatorDrawing) return;
            
            const rect = coordinatorCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            coordinatorContext.beginPath();
            coordinatorContext.moveTo(lastCoordinatorX, lastCoordinatorY);
            coordinatorContext.lineTo(x, y);
            coordinatorContext.stroke();
            
            lastCoordinatorX = x;
            lastCoordinatorY = y;
            
            // Save signature data
            document.getElementById('coordinatorSignatureData').value = coordinatorCanvas.toDataURL();
        }
        
        function stopCoordinatorDrawing() {
            isCoordinatorDrawing = false;
        }
        
        function clearCoordinatorSignature() {
            coordinatorContext.clearRect(0, 0, coordinatorCanvas.width, coordinatorCanvas.height);
            document.getElementById('coordinatorSignatureData').value = '';
        }
        
        // Navigation functions
        function nextSection(currentIndex) {
            // Validate required fields in current section before proceeding
            if (!validateSection(currentIndex)) {
                alert('Please fill in all required fields before proceeding.');
                return;
            }
            
            // Hide current section
            document.getElementById('section' + currentIndex).classList.remove('active');
            
            // Show next section
            currentSection = currentIndex + 1;
            document.getElementById('section' + currentSection).classList.add('active');
            
            // Update progress bar
            updateProgressBar();
            
            // Save progress
            saveFormData();
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function prevSection(currentIndex) {
            // Hide current section
            document.getElementById('section' + currentIndex).classList.remove('active');
            
            // Show previous section
            currentSection = currentIndex - 1;
            document.getElementById('section' + currentSection).classList.add('active');
            
            // Update progress bar
            updateProgressBar();
            
            // Save progress
            saveFormData();
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Validate current section
        function validateSection(sectionIndex) {
            const section = document.getElementById('section' + sectionIndex);
            const requiredInputs = section.querySelectorAll('input[required], select[required], textarea[required]');
            
            for (let i = 0; i < requiredInputs.length; i++) {
                const input = requiredInputs[i];
                
                // Skip radio button validation if any radio in the group is checked
                if (input.type === 'radio') {
                    const radioGroup = document.getElementsByName(input.name);
                    let isChecked = false;
                    
                    for (let j = 0; j < radioGroup.length; j++) {
                        if (radioGroup[j].checked) {
                            isChecked = true;
                            break;
                        }
                    }
                    
                    if (!isChecked) {
                        input.focus();
                        return false;
                    }
                    
                    // Skip other radios in the same group
                    i += document.querySelectorAll('input[name="' + input.name + '"]').length - 1;
                } else if (!input.value.trim()) {
                    input.focus();
                    return false;
                }
            }
            
            return true;
        }
        
        // Update progress bar
        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            const progress = (currentSection / (totalSections - 1)) * 100;
            progressBar.style.width = progress + '%';
        }
        
        // Calculate total score
        function updateTotal() {
            const scoreFields = [
                'protocolAdherence', 'timelyCommunication', 'projectMilestones',
                'preScreening', 'informedConsent',
                'dataAccuracy', 'dataTimeliness', 'adverseEvents',
                'regulatoryDocs', 'gcpCompliance',
                'visitScheduling', 'visitConducting',
                'teamwork', 'staffSupport'
            ];
            
            let totalScore = 0;
            let fieldsCount = 0;
            
            for (const field of scoreFields) {
                const selectedRadio = document.querySelector('input[name="' + field + '"]:checked');
                if (selectedRadio) {
                    totalScore += parseInt(selectedRadio.value);
                    fieldsCount++;
                }
            }
            
            // Update total score display
            const totalScoreElement = document.getElementById('totalScore');
            if (totalScoreElement) {
                totalScoreElement.textContent = totalScore;
                
                // Set hidden field for form submission
                document.getElementById('totalScoreField').value = totalScore;
                
                // Calculate percentage
                const percentage = (totalScore / (fieldsCount * 5)) * 100;
                
                if (document.getElementById('scorePercentage')) {
                    document.getElementById('scorePercentage').textContent = percentage.toFixed(1) + '%';
                }
                
                // Update pass/fail status
                const passStatus = document.getElementById('passStatus');
                if (passStatus) {
                    if (totalScore >= 42) {
                        passStatus.innerHTML = 'Status: <span class="passing">PASS</span> (The passing score is 42 marks out of 70)';
                    } else {
                        passStatus.innerHTML = 'Status: <span class="failing">BELOW PASSING SCORE</span> (The passing score is 42 marks out of 70)';
                    }
                }
            }
            
            // Save form data
            saveFormData();
        }
        
        // Get selected radio button value
        function getSelectedRadioValue(name) {
            const selectedRadio = document.querySelector(`input[name="${name}"]:checked`);
            return selectedRadio ? selectedRadio.value : '';
        }
        
        // Save form data to localStorage
        function saveFormData() {
            const formData = collectFormData();
            localStorage.setItem('evosFormData', JSON.stringify(formData));
        }
        
        // Load form data from localStorage
        function loadFormData() {
            const savedData = localStorage.getItem('evosFormData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                
                // Restore form fields
                if (formData.coordinatorName) document.getElementById('coordinatorName').value = formData.coordinatorName;
                if (formData.assessmentDate) document.getElementById('assessmentDate').value = formData.assessmentDate;
                if (formData.assessorName) document.getElementById('assessorName').value = formData.assessorName;
                if (formData.trialSite) document.getElementById('trialSite').value = formData.trialSite;
                
                // Restore radio buttons
                restoreRadioValue('protocolAdherence', formData.protocolAdherence);
                restoreRadioValue('timelyCommunication', formData.timelyCommunication);
                restoreRadioValue('projectMilestones', formData.projectMilestones);
                restoreRadioValue('preScreening', formData.preScreening);
                restoreRadioValue('informedConsent', formData.informedConsent);
                restoreRadioValue('dataAccuracy', formData.dataAccuracy);
                restoreRadioValue('dataTimeliness', formData.dataTimeliness);
                restoreRadioValue('adverseEvents', formData.adverseEvents);
                restoreRadioValue('regulatoryDocs', formData.regulatoryDocs);
                restoreRadioValue('gcpCompliance', formData.gcpCompliance);
                restoreRadioValue('visitScheduling', formData.visitScheduling);
                restoreRadioValue('visitConducting', formData.visitConducting);
                restoreRadioValue('teamwork', formData.teamwork);
                restoreRadioValue('staffSupport', formData.staffSupport);
                
                // Restore text fields
                if (formData.protocolComment) document.getElementById('protocolComment').value = formData.protocolComment;
                if (formData.commComment) document.getElementById('commComment').value = formData.commComment;
                if (formData.milestoneComment) document.getElementById('milestoneComment').value = formData.milestoneComment;
                if (formData.screeningComment) document.getElementById('screeningComment').value = formData.screeningComment;
                if (formData.consentComment) document.getElementById('consentComment').value = formData.consentComment;
                if (formData.dataEntryComment) document.getElementById('dataEntryComment').value = formData.dataEntryComment;
                if (formData.dataTimelyComment) document.getElementById('dataTimelyComment').value = formData.dataTimelyComment;
                if (formData.adverseComment) document.getElementById('adverseComment').value = formData.adverseComment;
                if (formData.regulatoryComment) document.getElementById('regulatoryComment').value = formData.regulatoryComment;
                if (formData.gcpComment) document.getElementById('gcpComment').value = formData.gcpComment;
                if (formData.schedulingComment) document.getElementById('schedulingComment').value = formData.schedulingComment;
                if (formData.conductingComment) document.getElementById('conductingComment').value = formData.conductingComment;
                if (formData.teamworkComment) document.getElementById('teamworkComment').value = formData.teamworkComment;
                if (formData.supportComment) document.getElementById('supportComment').value = formData.supportComment;
                if (formData.strengths) document.getElementById('strengths').value = formData.strengths;
                if (formData.improvements) document.getElementById('improvements').value = formData.improvements;
                
                // Restore current section
                if (typeof formData.currentSection === 'number') {
                    document.getElementById('section' + currentSection).classList.remove('active');
                    currentSection = formData.currentSection;
                    document.getElementById('section' + currentSection).classList.add('active');
                    updateProgressBar();
                }
                
                // Update total
                updateTotal();
            }
        }
        
        // Helper to restore radio button values
        function restoreRadioValue(name, value) {
            if (value) {
                const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
                if (radio) radio.checked = true;
            }
        }
        
        // Collect all form data
        function collectFormData() {
            return {
                // Basic Info
                coordinatorName: document.getElementById('coordinatorName').value,
                assessmentDate: document.getElementById('assessmentDate').value,
                assessorName: document.getElementById('assessorName').value,
                trialSite: document.getElementById('trialSite').value,
                
                // Section 1
                protocolAdherence: getSelectedRadioValue('protocolAdherence'),
                protocolComment: document.getElementById('protocolComment').value,
                timelyCommunication: getSelectedRadioValue('timelyCommunication'),
                commComment: document.getElementById('commComment').value,
                projectMilestones: getSelectedRadioValue('projectMilestones'),
                milestoneComment: document.getElementById('milestoneComment').value,
                
                // Section 2
                preScreening: getSelectedRadioValue('preScreening'),
                screeningComment: document.getElementById('screeningComment').value,
                informedConsent: getSelectedRadioValue('informedConsent'),
                consentComment: document.getElementById('consentComment').value,
                
                // Section 3
                dataAccuracy: getSelectedRadioValue('dataAccuracy'),
                dataEntryComment: document.getElementById('dataEntryComment').value,
                dataTimeliness: getSelectedRadioValue('dataTimeliness'),
                dataTimelyComment: document.getElementById('dataTimelyComment').value,
                adverseEvents: getSelectedRadioValue('adverseEvents'),
                adverseComment: document.getElementById('adverseComment').value,
                
                // Section 4
                regulatoryDocs: getSelectedRadioValue('regulatoryDocs'),
                regulatoryComment: document.getElementById('regulatoryComment').value,
                gcpCompliance: getSelectedRadioValue('gcpCompliance'),
                gcpComment: document.getElementById('gcpComment').value,
                
                // Section 5
                visitScheduling: getSelectedRadioValue('visitScheduling'),
                schedulingComment: document.getElementById('schedulingComment').value,
                visitConducting: getSelectedRadioValue('visitConducting'),
                conductingComment: document.getElementById('conductingComment').value,
                
                // Section 6
                teamwork: getSelectedRadioValue('teamwork'),
                teamworkComment: document.getElementById('teamworkComment').value,
                staffSupport: getSelectedRadioValue('staffSupport'),
                supportComment: document.getElementById('supportComment').value,
                
                // Section 7
                totalScore: document.getElementById('totalScore').textContent,
                strengths: document.getElementById('strengths').value,
                improvements: document.getElementById('improvements').value,
                
                // Save current section
                currentSection: currentSection
            };
        }
        
        // Prepare form data for submission to FormSubmit
        function prepareAndSubmitForm() {
            if (!validateSection(7)) {
                alert('Please fill in all required fields before submitting.');
                return;
            }
            
            // Check signatures
            if (!document.getElementById('assessorSignatureData').value) {
                alert('Please provide the Assessor\'s signature before submitting.');
                return;
            }
            
            if (!document.getElementById('coordinatorSignatureData').value) {
                alert('Please provide the Coordinator\'s signature before submitting.');
                return;
            }
            
            // Collect all form data
            const formData = collectFormData();
            
            // Add timestamp
            formData.submissionTimestamp = new Date().toISOString();
            
            // Set JSON data to the hidden field for FormSubmit
            document.getElementById('allFormData').value = JSON.stringify(formData);
            
            // Submit the form to FormSubmit
            document.getElementById('assessmentForm').submit();
            
            // Clear localStorage after submission
            localStorage.removeItem('evosFormData');
        }
    </script>
</body>
</html>
